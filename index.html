<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETS Abdo Karam</title>
</head>

<body>
    <h1></h1>
    <div id="images"></div>
    <script>
        const main = async () => {
            const imagesDiv = document.getElementById("images")
            const getImagesList = async () => {
                const prom = await fetch("/images.txt");
                const resp = await prom.text();
                return resp;
            }
            let imagesList = await getImagesList();
            imagesList = imagesList.split("\n\n");
            imagesList.shift();
            imagesList = imagesList.map(folder => {
                let final = folder.split("\n")
                final[0] = final[0].substr(1, final[0].length - 1)
                return final;
            })
            for (let i = 0; i < imagesList.length; i++) {
                const div = document.createElement('div')
                const header = document.createElement('h1')
                let headerText = imagesList[i][0];
                headerText = headerText.substr(headerText.lastIndexOf("/"));
                header.innerHTML = headerText;
                div.appendChild(header)
                for (let j = 1; i < imagesList[i].length; i++) {
                    const img = document.createElement('img');
                    img.src = imagesList[i][0] + imagesList[i][j];
                    div.appendChild(img);
                }
                document.body.appendChild(div)
            }
            console.log(imagesList)
        }
        main();
    </script>
</body>

</html>